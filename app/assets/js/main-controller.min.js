/*!
 * fastshell
 * Fiercely quick and opinionated front-ends
 * https://HosseinKarami.github.io/fastshell
 * @author Hossein Karami
 * @version 1.0.5
 * Copyright 2020. MIT licensed.
 */
"use strict";!function(){var e=angular.module("MainModule"),s=function(e,s,a,t,i,r,n,o,p){e.items=[{n:"John",cfg:{options:c,series:[{data:[1,4,8,3,2]}],title:" ",xAxis:{categories:[]},yAxis:{title:""}}},{n:"Mark",cfg:{options:c,series:[{data:[4,2,3,2,1]}],title:" ",xAxis:{categories:[]},yAxis:{title:""}}},{n:"Smith",cfg:{options:c,series:[{data:[1,4,3,2,6]}],title:" ",xAxis:{categories:[]},yAxis:{title:""}}}];var c={chart:{type:"solidgauge",height:100,width:200},legend:""};e.dashboardTabsList=dashboardTabsList,e.user={},e.loginMsg="",e.selectedVision="all",e.selectedPeriod="all",e.selectedOrganization="all",e.selectedEmployee="all",e.checkedTab="dashboard",e.MeasureType="all",e.dashboard=function(){var s=null;switch(e.checkedTab){case"dashboard":s="dashboard";break;case"KPIdashboard":s="kpi/dashboard";break;case"PersDashboard":s="perspective/dashboard";break;case"ObjDashboard":s="objective/dashboard";break;case"KPIreport":s="kpi/report";break;default:s="dashboard"}return s},e.getLogin=function(){var s=null;s=function(){return i.getUserLogin(e.user.name,e.user.password)},s().then(function(s){a(function(){1==s?(e.user.name="",e.user.password=""):e.loginMsg="Incorrect username/password !",p.path("/main")},0)})},e.getDashboardFilter=function(){var s=null;s=function(){return i.getFilterationData()},s().then(function(s){a(function(){e.$apply(function(){var a=[],t=[],i=[],r=[];e.filterData=[];for(var n in s.jsonObj.visionMap)t.push({key:n,value:s.jsonObj.visionMap[n]});for(var n in s.jsonObj.frequencyMap)a.push({key:n,value:s.jsonObj.frequencyMap[n]});for(var n in s.jsonObj.measureDataEmployeeMap)i.push({key:n,value:s.jsonObj.measureDataEmployeeMap[n]});for(var n in s.jsonObj.measureDataOrganizationMap)r.push({key:n,value:s.jsonObj.measureDataOrganizationMap[n]});e.filterData.push({frequencyMap:a,measureDataEmployeeMap:i,measureDataOrganizationMap:r,visionMap:t})})})})},e.filterDataList={visionOid:e.selectedVision,frequency:e.selectedPeriod,startYearDate:$(".start-datePicker").val(),endYearDate:e.endYearDate,dataFor:"all"},e.totalVisionData=[],e.loader=!1;var d=function(){e.loader=!0,$(".tabsGroupItem input").attr("disabled",!0);var s=new FormData;s.append("visionOid",e.selectedVision),s.append("startYearDate",$(".start-yearPicker").val()),s.append("endYearDate",$(".end-yearPicker").val()),s.append("startDate",$(".start-datePicker").val()),s.append("endDate",$(".end-datePicker").val()),s.append("dataFor",e.MeasureType),s.append("measureDataOrganizationOid",$('[name="selectedOrganization"]').val()),s.append("measureDataEmployeeOid",$('[name="selectedEmployee"]').val()),s.append("frequency",e.selectedPeriod),e.totalVisionData=[],e.perspectiveSeries=[],e.perspectivesReprt=[],e.perspectivesObjReprt=[],e.perspectivesObjKPIReprt=[],e.perspectivesPieChartsValuesReprt=[],e.perspectivesBarChartsValuesReprt=[],e.errorData="";var t=null;t=function(){return i.getDashboardVisionData(s,e.dashboard())},t().then(function(s){a(function(){e.$apply(function(){if("Y"===s.success)if("kpi/report"==e.dashboard()){$(".display-msg").hide();for(var a=0;a<s.jsonObj.perspectiveItems.length;a++)if("undefined"!=s.jsonObj.perspectiveItems[a]){e.perspectivesReprt.push(s.jsonObj.perspectiveItems[a]);for(var t=0;t<s.jsonObj.perspectiveItems[a].objectives.length;t++)if("undefined"!=s.jsonObj.perspectiveItems[a].objectives){e.perspectivesObjReprt.push(s.jsonObj.perspectiveItems[a].objectives[t]);for(var i=0;i<s.jsonObj.perspectiveItems[a].objectives[t].kpis.length;i++)"undefined"!=s.jsonObj.perspectiveItems[a].objectives[t].kpis&&e.perspectivesObjKPIReprt.push(s.jsonObj.perspectiveItems[a].objectives[t].kpis[i])}}for(var r=0;r<s.jsonObj.perspectivesPieChartValue.length;r++)"undefined"!=s.jsonObj.perspectivesPieChartValue&&e.perspectivesPieChartsValuesReprt.push(s.jsonObj.perspectivesPieChartValue[r]);for(var n=0;n<s.jsonObj.perspectivesBarChartValue[0].values.length;n++)"undefined"!=s.jsonObj.perspectivesBarChartValue[0].values&&e.perspectivesBarChartsValuesReprt.push(s.jsonObj.perspectivesBarChartValue[0].values[n]);console.log(e.perspectivesPieChartsValuesReprt),e.checkSrc=function(e){if(""==e)return"";var s=e.split("/")[2].split("'")[0];return"./assets/images/"+s},e.selectedVisionReport=$('#allVisions option[value="'+e.selectedVision+'"]').text()}else{e.bulkData=s.jsonObj,e.totalVisionData.push(s.jsonObj.vision),e.dateRange=s.jsonObj.vision.dateRangeScores,e.visionObjectives=[],e.visionKpis=[],e.KPImeasureDatas=[],e.visionKpisname=[];for(var a=0;a<s.jsonObj.vision.perspectives.length;a++)for(var o=0;o<s.jsonObj.vision.perspectives[a].objectives.length;o++){"undefined"!=s.jsonObj.vision.perspectives[a].objectives[o]&&e.visionObjectives.push(s.jsonObj.vision.perspectives[a].objectives[o]);for(var i=0;i<s.jsonObj.vision.perspectives[a].objectives[o].kpis.length;i++)"undefined"!=s.jsonObj.vision.perspectives[a].objectives[o].kpis[i]&&e.visionKpis.push(s.jsonObj.vision.perspectives[a].objectives[o].kpis[i])}e.perspectiveSeries=[{data:s.jsonObj.perspectiveSeries||s.jsonObj.series,times:s.jsonObj.perspectiveCategories||s.jsonObj.categories}],e.objectivesSeries=[{data:s.jsonObj.objectiveSeries||s.jsonObj.series,times:s.jsonObj.objectiveCategories||s.jsonObj.categories}],e.kpisSeries=[{data:s.jsonObj.kpiSeries||s.jsonObj.series,times:s.jsonObj.kpiCategories||s.jsonObj.categories}]}else e.errorData=s;e.loader=!1,$(".tabsGroupItem input").attr("disabled",!1)})})})};e.validate=function(){formIsValid&&d()},e.getDashboardFilter(),$(".disabledMType").hide(),$(".yearPicker").datepicker({viewMode:"years",minViewMode:"years",format:"yyyy"}).on("changeDate",function(s){e.startYearDate=$(this).val()}),$(".datePicker").datepicker({format:"yyyy/mm/dd"}),$(".datePicker").on("changeDate",function(e){$(this).datepicker("hide")}),$(".yearPicker").on("changeDate",function(e){$(this).datepicker("hide")}),e.tab=1,e.setTab=function(e){this.tab=e},e.isSet=function(e){return this.tab===e}};e.controller("MainController",["$scope","$http","$timeout","$interval","$api","$q","$filter","$compile","$location",s])}();